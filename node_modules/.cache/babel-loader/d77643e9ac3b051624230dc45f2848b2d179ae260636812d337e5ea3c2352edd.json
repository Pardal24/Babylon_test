{"ast":null,"code":"var _jsxFileName = \"/home/fpardal/Desktop/cropper/src/lib/CropPointsDelimiters.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport T from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CropPointsDelimiters = _ref => {\n  _s();\n  let {\n    cropPoints,\n    previewDims,\n    lineWidth = 3,\n    lineColor = '#3cabe2',\n    pointSize\n  } = _ref;\n  const canvas = useRef();\n  const clearCanvas = useCallback(() => {\n    const ctx = canvas.current.getContext('2d');\n    ctx.clearRect(0, 0, previewDims.width, previewDims.height);\n  }, [canvas.current, previewDims]);\n  const sortPoints = useCallback(() => {\n    const sortOrder = ['left-top', 'right-top', 'right-bottom', 'left-bottom'];\n    return sortOrder.reduce((acc, pointPos) => [...acc, cropPoints[pointPos]], []);\n  }, [cropPoints]);\n  const drawShape = useCallback(_ref2 => {\n    let [point1, point2, point3, point4] = _ref2;\n    const ctx = canvas.current.getContext('2d');\n    ctx.lineWidth = lineWidth;\n    ctx.strokeStyle = lineColor;\n    ctx.beginPath();\n    ctx.moveTo(point1.x + pointSize / 2, point1.y);\n    ctx.lineTo(point2.x - pointSize / 2, point2.y);\n    ctx.moveTo(point2.x, point2.y + pointSize / 2);\n    ctx.lineTo(point3.x, point3.y - pointSize / 2);\n    ctx.moveTo(point3.x - pointSize / 2, point3.y);\n    ctx.lineTo(point4.x + pointSize / 2, point4.y);\n    ctx.moveTo(point4.x, point4.y - pointSize / 2);\n    ctx.lineTo(point1.x, point1.y + pointSize / 2);\n    ctx.closePath();\n    ctx.stroke();\n  }, [canvas.current]);\n  useEffect(() => {\n    if (cropPoints && canvas.current) {\n      clearCanvas();\n      const sortedPoints = sortPoints();\n      drawShape(sortedPoints);\n    }\n  }, [cropPoints, canvas.current]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvas,\n    style: {\n      position: 'absolute',\n      zIndex: 5\n    },\n    width: previewDims.width,\n    height: previewDims.height\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(CropPointsDelimiters, \"DwsMbLgyGCcGDbKVZWDb+UKB638=\");\n_c = CropPointsDelimiters;\nexport default CropPointsDelimiters;\nCropPointsDelimiters.propTypes = {\n  previewDims: T.shape({\n    ratio: T.number,\n    width: T.number,\n    height: T.number\n  }),\n  cropPoints: T.shape({\n    'left-top': T.shape({\n      x: T.number,\n      y: T.number\n    }).isRequired,\n    'right-top': T.shape({\n      x: T.number,\n      y: T.number\n    }).isRequired,\n    'right-bottom': T.shape({\n      x: T.number,\n      y: T.number\n    }).isRequired,\n    'left-bottom': T.shape({\n      x: T.number,\n      y: T.number\n    }).isRequired\n  }),\n  lineColor: T.string,\n  lineWidth: T.number,\n  pointSize: T.number\n};\nvar _c;\n$RefreshReg$(_c, \"CropPointsDelimiters\");","map":{"version":3,"names":["React","useCallback","useEffect","useRef","T","jsxDEV","_jsxDEV","CropPointsDelimiters","_ref","_s","cropPoints","previewDims","lineWidth","lineColor","pointSize","canvas","clearCanvas","ctx","current","getContext","clearRect","width","height","sortPoints","sortOrder","reduce","acc","pointPos","drawShape","_ref2","point1","point2","point3","point4","strokeStyle","beginPath","moveTo","x","y","lineTo","closePath","stroke","sortedPoints","ref","style","position","zIndex","fileName","_jsxFileName","lineNumber","columnNumber","_c","propTypes","shape","ratio","number","isRequired","string","$RefreshReg$"],"sources":["/home/fpardal/Desktop/cropper/src/lib/CropPointsDelimiters.js"],"sourcesContent":["import React, { useCallback, useEffect, useRef } from 'react'\nimport T from 'prop-types'\n\nconst CropPointsDelimiters = ({\n  cropPoints,\n  previewDims,\n  lineWidth = 3,\n  lineColor = '#3cabe2',\n  pointSize\n}) => {\n  const canvas = useRef()\n\n  const clearCanvas = useCallback(() => {\n    const ctx = canvas.current.getContext('2d')\n    ctx.clearRect(0, 0, previewDims.width, previewDims.height)\n  }, [canvas.current, previewDims])\n\n  const sortPoints = useCallback(() => {\n    const sortOrder = ['left-top', 'right-top', 'right-bottom', 'left-bottom']\n    return sortOrder.reduce(\n      (acc, pointPos) => [...acc, cropPoints[pointPos]],\n      []\n    )\n  }, [cropPoints])\n\n  const drawShape = useCallback(\n    ([point1, point2, point3, point4]) => {\n      const ctx = canvas.current.getContext('2d')\n      ctx.lineWidth = lineWidth\n      ctx.strokeStyle = lineColor\n\n      ctx.beginPath()\n      ctx.moveTo(point1.x + pointSize / 2, point1.y)\n      ctx.lineTo(point2.x - pointSize / 2, point2.y)\n\n      ctx.moveTo(point2.x, point2.y + pointSize / 2)\n      ctx.lineTo(point3.x, point3.y - pointSize / 2)\n\n      ctx.moveTo(point3.x - pointSize / 2, point3.y)\n      ctx.lineTo(point4.x + pointSize / 2, point4.y)\n\n      ctx.moveTo(point4.x, point4.y - pointSize / 2)\n      ctx.lineTo(point1.x, point1.y + pointSize / 2)\n      ctx.closePath()\n      ctx.stroke()\n    },\n    [canvas.current]\n  )\n\n  useEffect(() => {\n    if (cropPoints && canvas.current) {\n      clearCanvas()\n      const sortedPoints = sortPoints()\n      drawShape(sortedPoints)\n    }\n  }, [cropPoints, canvas.current])\n\n  return (\n    <canvas\n      ref={canvas}\n      style={{\n        position: 'absolute',\n        zIndex: 5\n      }}\n      width={previewDims.width}\n      height={previewDims.height}\n    />\n  )\n}\n\nexport default CropPointsDelimiters\n\nCropPointsDelimiters.propTypes = {\n  previewDims: T.shape({\n    ratio: T.number,\n    width: T.number,\n    height: T.number\n  }),\n  cropPoints: T.shape({\n    'left-top': T.shape({ x: T.number, y: T.number }).isRequired,\n    'right-top': T.shape({ x: T.number, y: T.number }).isRequired,\n    'right-bottom': T.shape({ x: T.number, y: T.number }).isRequired,\n    'left-bottom': T.shape({ x: T.number, y: T.number }).isRequired\n  }),\n  lineColor: T.string,\n  lineWidth: T.number,\n  pointSize: T.number\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}