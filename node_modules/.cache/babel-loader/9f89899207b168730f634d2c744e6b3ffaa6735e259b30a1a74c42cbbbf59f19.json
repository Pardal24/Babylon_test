{"ast":null,"code":"export const readFile = file => {\n  if (file instanceof File) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = event => {\n        resolve(reader.result);\n      };\n      reader.onerror = err => {\n        reject(err);\n      };\n      reader.readAsDataURL(file);\n    });\n  }\n  if (typeof file === 'string') {\n    return Promise.resolve(file);\n  }\n};\nexport const calcDims = (width, height, externalMaxWidth, externalMaxHeight) => {\n  const ratio = width / height;\n  const maxWidth = window.innerWidth * 0.7;\n  const maxHeight = window.innerHeight * 0.7;\n  const calculated = {\n    width: maxWidth,\n    height: Math.round(maxWidth / ratio),\n    ratio: ratio\n  };\n  if (calculated.height > maxHeight) {\n    calculated.height = maxHeight;\n    calculated.width = Math.round(maxHeight * ratio);\n  }\n  return calculated;\n};\nexport function isCrossOriginURL(url) {\n  const {\n    location\n  } = window;\n  const parts = url.match(/^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i);\n  return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n}","map":{"version":3,"names":["readFile","file","File","Promise","resolve","reject","reader","FileReader","onload","event","result","onerror","err","readAsDataURL","calcDims","width","height","externalMaxWidth","externalMaxHeight","ratio","maxWidth","window","innerWidth","maxHeight","innerHeight","calculated","Math","round","isCrossOriginURL","url","location","parts","match","protocol","hostname","port"],"sources":["/home/fpardal/Desktop/cropper/src/lib/utils.js"],"sourcesContent":["export const readFile = (file) => {\n  if (file instanceof File) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader()\n      reader.onload = (event) => {\n        resolve(reader.result)\n      }\n      reader.onerror = (err) => {\n        reject(err)\n      }\n      reader.readAsDataURL(file)\n    })\n  }\n  if (typeof file === 'string') {\n    return Promise.resolve(file)\n  }\n}\n\nexport const calcDims = (\n  width,\n  height,\n  externalMaxWidth,\n  externalMaxHeight\n) => {\n  const ratio = width / height\n\n  const maxWidth = window.innerWidth * 0.7\n  const maxHeight = window.innerHeight * 0.7\n  const calculated = {\n    width: maxWidth,\n    height: Math.round(maxWidth / ratio),\n    ratio: ratio\n  }\n\n  if (calculated.height > maxHeight) {\n    calculated.height = maxHeight\n    calculated.width = Math.round(maxHeight * ratio)\n  }\n  return calculated\n}\n\nexport function isCrossOriginURL(url) {\n  const { location } = window;\n  const parts = url.match(/^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i);\n\n  return (\n    parts !== null &&\n    (parts[1] !== location.protocol ||\n      parts[2] !== location.hostname ||\n      parts[3] !== location.port)\n  );\n}"],"mappings":"AAAA,OAAO,MAAMA,QAAQ,GAAIC,IAAI,IAAK;EAChC,IAAIA,IAAI,YAAYC,IAAI,EAAE;IACxB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtC,MAAMC,MAAM,GAAG,IAAIC,UAAU,CAAC,CAAC;MAC/BD,MAAM,CAACE,MAAM,GAAIC,KAAK,IAAK;QACzBL,OAAO,CAACE,MAAM,CAACI,MAAM,CAAC;MACxB,CAAC;MACDJ,MAAM,CAACK,OAAO,GAAIC,GAAG,IAAK;QACxBP,MAAM,CAACO,GAAG,CAAC;MACb,CAAC;MACDN,MAAM,CAACO,aAAa,CAACZ,IAAI,CAAC;IAC5B,CAAC,CAAC;EACJ;EACA,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;IAC5B,OAAOE,OAAO,CAACC,OAAO,CAACH,IAAI,CAAC;EAC9B;AACF,CAAC;AAED,OAAO,MAAMa,QAAQ,GAAGA,CACtBC,KAAK,EACLC,MAAM,EACNC,gBAAgB,EAChBC,iBAAiB,KACd;EACH,MAAMC,KAAK,GAAGJ,KAAK,GAAGC,MAAM;EAE5B,MAAMI,QAAQ,GAAGC,MAAM,CAACC,UAAU,GAAG,GAAG;EACxC,MAAMC,SAAS,GAAGF,MAAM,CAACG,WAAW,GAAG,GAAG;EAC1C,MAAMC,UAAU,GAAG;IACjBV,KAAK,EAAEK,QAAQ;IACfJ,MAAM,EAAEU,IAAI,CAACC,KAAK,CAACP,QAAQ,GAAGD,KAAK,CAAC;IACpCA,KAAK,EAAEA;EACT,CAAC;EAED,IAAIM,UAAU,CAACT,MAAM,GAAGO,SAAS,EAAE;IACjCE,UAAU,CAACT,MAAM,GAAGO,SAAS;IAC7BE,UAAU,CAACV,KAAK,GAAGW,IAAI,CAACC,KAAK,CAACJ,SAAS,GAAGJ,KAAK,CAAC;EAClD;EACA,OAAOM,UAAU;AACnB,CAAC;AAED,OAAO,SAASG,gBAAgBA,CAACC,GAAG,EAAE;EACpC,MAAM;IAAEC;EAAS,CAAC,GAAGT,MAAM;EAC3B,MAAMU,KAAK,GAAGF,GAAG,CAACG,KAAK,CAAC,+BAA+B,CAAC;EAExD,OACED,KAAK,KAAK,IAAI,KACbA,KAAK,CAAC,CAAC,CAAC,KAAKD,QAAQ,CAACG,QAAQ,IAC7BF,KAAK,CAAC,CAAC,CAAC,KAAKD,QAAQ,CAACI,QAAQ,IAC9BH,KAAK,CAAC,CAAC,CAAC,KAAKD,QAAQ,CAACK,IAAI,CAAC;AAEjC"},"metadata":{},"sourceType":"module","externalDependencies":[]}